!function(){"use strict";let e=null;function t(n){e||(e=n);var o=n-e;document.getElementById("resultBaner").style.opacity=o>500?100-(o-500)/5+"%":o/5+"%",o<1e3?window.requestAnimationFrame(t):e=null}function n(e){let t=e.scrollLeft,n=null,o=null,i=!0;function r(n){o||(o=n);let i=n-o;i>1e3&&(i=1e3),e.scrollLeft=t*(1-i/1e3),i<1e3&&window.requestAnimationFrame(r)}!function(e){let t=document.getElementsByClassName("number");if(t.length<1)return;let n=Math.round(e.scrollLeft/e.offsetWidth);if(n<t.length-1){for(let e=0;e<t.length;e++)t[e].style.backgroundColor="white";t[n+1].style.backgroundColor="gray"}if(n===t.length-1){for(let e=0;e<t.length;e++)t[e].style.backgroundColor="white";t[0].style.backgroundColor="gray"}}(e),window.requestAnimationFrame((function o(a){n||(n=a);let l=a-n,s=e.scrollLeft;l>1e3&&(l=1e3),e.scrollLeft=t+e.offsetWidth*(l/1e3),e.scrollLeft!==s||i?l<1e3&&(i=!1,window.requestAnimationFrame(o)):window.requestAnimationFrame(r)}))}function o(e,t,n){i("div","orderBtn",e).innerHTML="Замовити";let o=i("div","bayAll",e);i("h2","conected",o).innerHTML="Кошик",i("div","shopBasket",o);let l=i("div","productList",o);for(let e=0;e<n.length;e+=2){let o=t.products[n[e]],s=i("div","oneProduct",l);s.style.height="300px",a("img","",o.img,s).id=o.id,i("p","counterOrdered",s).innerHTML=n[e+1];let c=i("div","",s),d=i("p","productName",c);d.innerHTML=o.productName,d.id=o.id,i("p","productComponents",c).innerHTML=o.components,i("p","price",c).innerHTML=o.price+" грн";let u=r("input","order","button",s);u.value="Додати ще одиницю",u.style.fontSize="2.3vh",u.style.top="57vh",u.style.left="5.4vw";let h=r("input","unorder","button",s);h.value="Вилучити одиницю",h.style.fontSize="2.3vh",h.style.left="11.5vh",h.style.top="52vh"}}function i(e,t,n){let o=document.createElement(e);return o.className=t,n.appendChild(o),o}function r(e,t,n,o){let i=document.createElement(e);return i.className=t,i.type=n,o.appendChild(i),i}function a(e,t,n,o){let i=document.createElement(e);return i.className=t,i.src=n,o.appendChild(i),i}let l=[],s=["","","","","",""];var c,d;c=function(){document.getElementById("loading").style.display="none",document.getElementsByClassName("container")[0].style.display="block",document.getElementsByClassName("footer")[0].style.display="flex"},d=window.setInterval((function(){void 0!==document.getElementsByClassName("container")[0]&&(window.clearInterval(d),c.call(this))}),800);class u{constructor(e,t,n){this.container=e,this.db=t,this.siteUrl=n,this.hashId=-1,n.length>1&&(this.hashId=parseInt(n[1]))}renderScreen(){switch(this.siteUrl[0]){case"#catalog":-1!==this.hashId?this.hashId>=0&&this.hashId<this.db.category.length?function(e,t,n){let o=i("div","catalog",e),l=i("h2","ctegoryName",o);l.innerHTML=t.category[n].name;let s=i("div","productList",o);for(let e=0;e<t.products.length;e++)if(t.products[e].categoryId===t.category[n].id){let n=i("div","oneProduct",s);a("img","",t.products[e].img,n).id=t.products[e].id;let o=i("div","",n),l=i("p","productName",o);l.innerHTML=t.products[e].productName,l.id=t.products[e].id,i("p","productComponents",o).innerHTML=t.products[e].components,i("p","price",o).innerHTML=t.products[e].price+" грн",r("input","order","button",n).value="До корзини"}0===s.childNodes.length&&(l.remove(),s.remove())}(this.container,this.db,this.hashId):window.location.hash="":function(e,t){let n=i("div","catalog",e);for(let e=0;e<t.category.length;e++){let o=i("h2","ctegoryName",n);o.innerHTML=t.category[e].name;let l=i("div","productList",n);for(let n=0;n<t.products.length;n++)if(t.products[n].categoryId===t.category[e].id){let e=i("div","oneProduct",l);a("img","",t.products[n].img,e).id=t.products[n].id;let o=i("div","",e),s=i("p","productName",o);s.innerHTML=t.products[n].productName,s.id=t.products[n].id,i("p","productComponents",o).innerHTML=t.products[n].components,i("p","price",o).innerHTML=t.products[n].price+" грн",r("input","order","button",e).value="До корзини"}0===l.childNodes.length&&(o.remove(),l.remove())}}(this.container,this.db);break;case"#oneAction":this.hashId>=0&&this.hashId<this.db.Action.length?function(e,t,n){let o=i("div","aboutAct",e);i("p","oneActionName",o).innerHTML=t.Action[n].name,i("p","actionTime",o).innerHTML="Опубліковано: "+t.Action[n].datePosted,a("img","oneACtionImg",t.Action[n].image,o),i("p","oneActionDescription",o).innerHTML=t.Action[n].about}(this.container,this.db,this.hashId):window.location.hash="";break;case"#oneProductPage":this.hashId>=0&&this.hashId<this.db.products.length?function(e,t,n){let o=i("div","aboutProduct",e),l=i("div","allProdImg",o);a("img","productImg",t.products[n].img,l).id=t.products[n].id,i("p","oneProductName",o).innerHTML=t.products[n].productName;let s=i("p","price",o);s.innerHTML="ціна: "+t.products[n].price+" грн",s.style.fontSize="2.5vw",s.style.color="white",s.style.top="30vh",s.style.left="-2.5vw";let c=r("input","order","button",l);c.value="До корзини",c.style.top="28vw",c.style.left="40vw",c.style.backgroundColor="indianred",i("p","oneProductDescription",o).innerHTML=t.products[n].components;let d=i("div","conectedAll",e);i("h2","conected",d).innerHTML="Пов'язані продукти";let u=t.products[n],h=i("div","productList",d);for(let e=0;e<u.similar.length;e++){let n=u.similar[e],o=t.products[n],l=i("div","oneProduct",h);a("img","",o.img,l).id=o.id;let s=i("div","",l),c=i("p","productName",s);c.innerHTML=o.productName,c.id=o.id,i("p","productComponents",s).innerHTML=o.components,i("p","price",s).innerHTML=o.price+" грн",r("input","order","button",l).value="До корзини"}}(this.container,this.db,this.hashId):window.location.hash="";break;case"#basketPage":o(this.container,this.db,l),g();break;case"#createOrder":JSON.parse(window.localStorage.getItem("orders")).length>0?(function(e){let t=["Hомер телефону *","Email","ПІБ","Адреса *","Час доставки *","Варіант оплати"],n=i("div","area",e);for(let e=0;e<t.length;e++){let o=i("p","functionName",n);o.innerHTML=t[e],o.id=e+"name",i("textarea","functionInput",n).id=e+"text"}i("div","shopBasket",e),r("input","PutOrder","button",e).value="Оформити замовлення"}(this.container),g()):window.location.hash="";break;default:window.location.hash="",function(e,t){let o=i("div","actionSlide",e),l=i("div","allAction",o);for(let e=0;e<t.Action.length;e++){let n=i("div","oneAction",l);a("img","actImg",t.Action[e].image,n);let o=r("input","action","button",n);o.value="Детальніше",o.id=t.Action[e].id}let s=i("div","whatAction",o);s.style.gridTemplateColumns=" 7fr repeat("+t.Action.length+",1fr) 7fr",i("div","",s);for(let e=0;e<t.Action.length;e++)i("div","number",s);i("div","",s),i("h1","categoryHit",e).innerHTML="Гаряча пропозиція";let c=i("div","recomendHit",e);for(let e=0;e<t.products.length;e++)if(t.products[e].isHit){let n=i("div","oneProduct",c);a("img","",t.products[e].img,n).id=t.products[e].id;let o=i("div","",n),l=i("p","productName",o);l.innerHTML=t.products[e].productName,l.id=t.products[e].id,i("p","productComponents",o).innerHTML=t.products[e].components,i("p","price",o).innerHTML=t.products[e].price+" грн",r("input","order","button",n).value="До корзини"}setInterval((()=>{n(l)}),5e3)}(this.container,this.db)}}}class h{constructor(e,t){this.phoneNumber=e[0].value,this.mail=e[1].value,this.name=e[2].value,this.address=e[3].value,this.date=e[4].value,"готівка"===e[5].value||"Готівка"===e[5].value?this.variant=1:this.variant=0,this.orderList=t}}let p=new u(null,null,"");function m(e,t,n){let o=parseInt(e.id);""!==n[o].value&&void 0!==n[o].value||(n[o].value=t)}function g(){let e=document.getElementById("shopCounter"),t=document.getElementsByClassName("shopBasket");t.length>1&&(t=t[1].firstChild);let n=0;for(let e=0;e<l.length;e+=2)n+=l[e+1];e.innerHTML=n}window.addEventListener("click",(e=>{let i=e.target.className;""===i&&"IMG"===e.target.tagName&&(i="IMG");let r=window.location.hash;switch(i){case"oneOpt":window.location.hash="#catalog/"+e.target.id;break;case"shopCounter":case"shopBasket":"#basketPage"!==r&&""!==e.target.id&&(window.location.hash="#basketPage");break;case"productName":window.location.hash="#oneProductPage/"+e.target.id;break;case"action":window.location.hash="#oneAction/"+e.target.id;break;case"IMG":window.location.hash="#oneProductPage/"+e.target.id;break;case"order":!function(e){let n=e.parentElement.firstChild.id,i=document.getElementById("resultBaner");for(let o=0;o<l.length;o+=2)if(l[o]===n)return l[o+1]++,"counterOrdered"===e.parentElement.childNodes[1].className&&(e.parentElement.childNodes[1].innerHTML=l[o+1]),window.localStorage.setItem("orders",JSON.stringify(l)),i.style.display="block",i.style.top="calc(50vh - 10vh + "+window.scrollY+"px)",window.requestAnimationFrame(t),setTimeout((function(){i.style.display="none"}),1e3),void g();l.push(n),l.push(1),i.style.display="block",i.style.top="calc(50vh - 10vh + "+window.scrollY+"px)",window.requestAnimationFrame(t),setTimeout((function(){i.style.display="none"}),1e3),window.localStorage.setItem("orders",JSON.stringify(l)),"#basketPage"===window.location.hash&&o(p.container,p.db,l),g()}(e.target);break;case"unorder":!function(e){let t=e.parentElement.firstChild.id;for(let n=0;n<l.length;n+=2)if(l[n]===t){if(l[n+1]--,l[n+1]<1){l.splice(n+1,1),l.splice(n,1);let t=e.parentElement;return t.animate([{opacity:"100%"},{opacity:"0%"}],{duration:1e3,iterations:1}),window.localStorage.setItem("orders",JSON.stringify(l)),g(),void setTimeout((function(){t.remove()}),980,t)}e.parentElement.childNodes[1].innerHTML=l[n+1],window.localStorage.setItem("orders",JSON.stringify(l)),g()}}(e.target);break;case"orderBtn":l.length>0&&(window.location.hash="#createOrder");break;case"productImg":n(e.target.parentElement);break;case"PutOrder":!async function(){let e=document.getElementsByClassName("functionInput"),n=function(e){let t=!0;/^\+380\d{9}$/.test(e[0].value)||(alert("Некоректно введений номер телефону"),t=!1,e[0].style.color="red"),/^[^@.]{1,}@[^@.]{1,}.[^@.]{1,}$/.test(e[1].value)||""===e[1].value||(alert("Некоректно введений email"),t=!1,e[1].style.color="red"),/^\W{1,}$/.test(e[2].value)||""===e[2].value||(alert("Некоректно введене ім'я"),t=!1,e[2].style.color="red"),/^Київ, вул.\W{1,}/.test(e[3].value)||(alert("Некоректно введена адреса"),t=!1,e[3].style.color="red"),["готівка","Готівка","Карта","карта"].includes(e[5].value)||(alert("Оплата неможлива"),t=!1,e[5].style.color="red");for(let t=0;t<e.length;t++)e[t].oninput=function(){e[t].style.color="#000000"},""===e[t].value&&(e[t].style.color="#000000");return t}(e),o=document.getElementById("resultBaner");if(n){let t=new h(e,l),n=await async function(e){return fetch("https://my-json-server.typicode.com/MykolaOnyshchuk/Lab4CD/posts",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((e=>e)).catch((function(e){alert("Помилка Сервера "+e)}))}(t);console.log(n),o.innerHTML="Прийнято!",window.localStorage.setItem("orders",JSON.stringify([])),l=[],g()}else o.innerHTML="Помилка замовлення";o.style.display="block",o.style.top="calc(50vh - 10vh + "+window.scrollY+"px)",window.requestAnimationFrame(t),setTimeout((function(){o.style.display="none",o.innerHTML="Товар додано в корзину"}),1e3)}()}})),window.onmouseover=function(e){let t=e.target.className,n=document.getElementsByClassName("functionInput");if("#createOrder"===window.location.hash&&"functionName"===t)switch(e.target.innerHTML){case"Hомер Телефону *":m(e.target,s[0],n);break;case"Емейл":m(e.target,s[1],n);break;case"ПІБ":m(e.target,s[2],n);break;case"Адреса *":m(e.target,s[3],n);break;case"Дата доставки *":m(e.target,s[4],n);break;case"Варіант оплати":m(e.target,s[5],n)}},window.addEventListener("mouseout",(e=>{let t=e.target.className,n=document.getElementsByClassName("functionInput");if("#createOrder"!==window.location.hash||"functionName"!==t)return;let o=parseInt(e.target.id);n[o].value===s[o]&&(n[o].value="")})),window.onload=async function(){let e;try{e=await async function(){return fetch("https://my-json-server.typicode.com/MykolaOnyshchuk/Lab4CD/db",{method:"GET",headers:{"content-type":"application/json"}}).then((e=>e.json())).then((e=>e))}()}catch(e){alert("помилка сервера: "+e+". Спробуйте пізніше")}if(0===window.localStorage.length)window.localStorage.setItem("orders",JSON.stringify(l));else{let e=window.localStorage.getItem("orders");l=JSON.parse(e)}let t=document.getElementsByClassName("container");t.length>0&&t[0].remove();let n=function(e,t,n,o){let i=document.createElement("div");return i.className="container",n.insertAdjacentElement("afterend",i),i}(0,0,document.getElementsByClassName("upperMenu")[0]);document.getElementsByClassName("container")[0].style.display="none",p=new u(n,e,window.location.hash.split("/"));let o=document.getElementsByClassName("catOpt")[0];for(let e=0;e<p.db.category.length;e++){let t=i("div","oneOpt",o);t.innerHTML=p.db.category[e].name,t.id=p.db.category[e].id}g(),p.renderScreen()},window.onhashchange=function(){location.reload()}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95b3VyLWFwcGxpY2F0aW9uLy4vanMvc3R5bGUuanMiLCJ3ZWJwYWNrOi8veW91ci1hcHBsaWNhdGlvbi8uL2pzL3NjcmlwdC5qcyIsIndlYnBhY2s6Ly95b3VyLWFwcGxpY2F0aW9uLy4vanMvZmV0Y2guanMiXSwibmFtZXMiOlsic3RhcnQiLCJiYW5lcnN0ZXAiLCJjdXJyZW50VGltZSIsInByb2Nlc3MiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJvcGFjaXR5Iiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW92ZUltZyIsInBhcmVudCIsInN0YXJ0U2Nyb2xsIiwic2Nyb2xsTGVmdCIsImluZmluaXR5c3RhcnQiLCJpbmZpbml0eWVuZCIsImZpcnN0bW92ZSIsInNsaWRlckRvd24iLCJkb3RzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxlbmd0aCIsIm51bWJlciIsIk1hdGgiLCJyb3VuZCIsIm9mZnNldFdpZHRoIiwicSIsImJhY2tncm91bmRDb2xvciIsInJlcGFpbnREb3QiLCJzbGlkZXJVcCIsInRtcHNjcm9sbCIsImJhc2tldEZ1bGwiLCJjb250YWluZXIiLCJkYiIsIm9yZGVyIiwiaW5zZXJ0RWxlbWVudCIsImlubmVySFRNTCIsImJheUFsbCIsInByb2R1Y3RMaXN0IiwiaSIsIm15UHJvZCIsInByb2R1Y3RzIiwib25lUHJvZHVjdCIsImhlaWdodCIsImluc2VydEltZyIsImltZyIsImlkIiwidGV4dERpdiIsInByb2R1Y3ROYW1lIiwiY29tcG9uZW50cyIsInByaWNlIiwiYWNCdG4iLCJpbnNlcnRFbGVtZW50RGV0YWlscyIsInZhbHVlIiwiZm9udFNpemUiLCJ0b3AiLCJsZWZ0IiwiZGVsQnRuIiwidHlwZSIsImVsQ2xhc3NOYW1lIiwibmV3RWwiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJ0eXBlT2YiLCJzcmMiLCJvcmRlckNhc2UiLCJjYWxsYmFjayIsImludGVydmFsSWQiLCJkaXNwbGF5Iiwic2V0SW50ZXJ2YWwiLCJ1bmRlZmluZWQiLCJjbGVhckludGVydmFsIiwiY2FsbCIsInRoaXMiLCJzY3JlZW5DcmVhdGUiLCJzaXRlVXJsIiwiaGFzaElkIiwicGFyc2VJbnQiLCJjYXRlZ29yeSIsImNhdGFsb2ciLCJjdGVnb3J5TmFtZSIsIm5hbWUiLCJjYXRlZ29yeUlkIiwiY2hpbGROb2RlcyIsInJlbW92ZSIsImNhdGFsb2dPbmVGdWxsIiwibG9jYXRpb24iLCJoYXNoIiwiY2F0YWxvZ0Z1bGwiLCJBY3Rpb24iLCJhYm91dEFjdCIsImRhdGVQb3N0ZWQiLCJpbWFnZSIsImFib3V0IiwiYWN0aW9uT25lRnVsbCIsImFib3V0UHJvZHVjdCIsImFsbFByb2RJbWciLCJvbmVQcmljZSIsImNvbG9yIiwiY29uZWN0ZWRBbGwiLCJteVByb2R1Y3QiLCJzaW1pbGFyIiwicHJvZElkIiwiY29uZWN0UHJvZCIsIm9uZVByb2R1Y3RGdWxsIiwicmVmcmVzaENvdW50ZXIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwib3B0aW9uIiwiYXJlYSIsImZ1bmN0aW9uTmFtZSIsIm9yZGVyRnVsbCIsImFjdGlvblNsaWRlIiwiYWxsQWN0aW9uIiwib25lQWN0aW9uIiwid2hhdEFjdGlvbiIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJyZWNvbWVuZEhpdCIsImlzSGl0IiwiaW5kZXhGdWxsIiwiT3JkZXIiLCJ0ZXh0QXJlYSIsIm9yZGVyTGlzdCIsInBob25lTnVtYmVyIiwibWFpbCIsImFkZHJlc3MiLCJkYXRlIiwidmFyaWFudCIsInNjUmVuZGVyIiwicmV0b3VjaFRleHQiLCJ0YXJnZXQiLCJ0ZXh0IiwiY291bnRlclByb2R1Y3QiLCJzaG9wQmFza2V0IiwiZmlyc3RDaGlsZCIsImNvdW50ZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJjdXJlbnRDbGFzc05hbWUiLCJ0YWdOYW1lIiwibG9jIiwicGFyZW50RWxlbWVudCIsImJhbmVyIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNjcm9sbFkiLCJzZXRUaW1lb3V0IiwicHVzaCIsImFkZFRvT3JkZXIiLCJzcGxpY2UiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJpdGVyYXRpb25zIiwiZGVsZXRlRnJvbU9yZGVyIiwiYXN5bmMiLCJpc1ZhbGlkIiwidGVzdCIsImFsZXJ0IiwiaW5jbHVkZXMiLCJvbmlucHV0IiwidmFsaWRhdGlvbiIsIm9uZU9yZGVyIiwieW91ck9yZGVyIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiaGVhZGVycyIsInRoZW4iLCJyZXN1bHQiLCJqc29uIiwiZGF0YSIsImNhdGNoIiwiZXJyb3IiLCJwb3N0T3JkZXIiLCJjb25zb2xlIiwibG9nIiwicHVzaE9yZGVyIiwib25tb3VzZW92ZXIiLCJvbmxvYWQiLCJkYjEiLCJmZXRjaE15RGF0YSIsIm9yZGVyVG1wIiwic2NyZWVuIiwicGxhY2UiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJpbnNlcnRFbGVtZW50SW5QbGFjZSIsInNwbGl0IiwiY2F0T3B0IiwidyIsInJlbmRlclNjcmVlbiIsIm9uaGFzaGNoYW5nZSIsInJlbG9hZCJdLCJtYXBwaW5ncyI6InlCQXlJQSxJQUFJQSxFQUFRLEtBQ1osU0FBU0MsRUFBVUMsR0FDVkYsSUFBT0EsRUFBUUUsR0FDcEIsSUFBSUMsRUFBVUQsRUFBWUYsRUFDWkksU0FBU0MsZUFBZSxlQUNaQyxNQUFNQyxRQUE3QkosRUFBVSxJQUE4QixLQUFPQSxFQUFRLEtBQUssRUFBRyxJQUNwQyxFQUFVLEVBQUcsSUFDdkNBLEVBQVUsSUFDVkssT0FBT0Msc0JBQXNCUixHQUU1QkQsRUFBTSxLQUdmLFNBQVNVLEVBQVFDLEdBQ2IsSUFBSUMsRUFBWUQsRUFBT0UsV0FDbkJDLEVBQWMsS0FDZEMsRUFBWSxLQUNaQyxHQUFVLEVBZ0JkLFNBQVNDLEVBQVdmLEdBQ1hhLElBQWFBLEVBQWNiLEdBQ2hDLElBQUlDLEVBQVVELEVBQWNhLEVBQ3pCWixFQUFVLE1BQU1BLEVBQVUs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QixVQUFVLEdBQ3ZELElBQUksSUFBSTJLLEVBQUksRUFBRUEsRUFBSTVELEVBQVNsRyxHQUFHOEMsU0FBUzFELE9BQVEwSyxJQUFJLENBQy9DLElBQUloSixFQUFVWixFQUFjLE1BQU8sU0FBVTJKLEdBQzdDL0ksRUFBUVgsVUFBWStGLEVBQVNsRyxHQUFHOEMsU0FBU2dILEdBQUc3RyxLQUM1Q25DLEVBQVFELEdBQUtxRixFQUFTbEcsR0FBRzhDLFNBQVNnSCxHQUFHakosR0FFekM0RCxJQUNBeUIsRUFBUzZELGdCQUdidkwsT0FBT3dMLGFBQWUsV0FBWTFHLFNBQVMyRyxVIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGluZGV4RnVsbChjb250YWluZXIsIGRiKXtcbiAgICBsZXQgYWN0aW9uU2xpZGUgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnYWN0aW9uU2xpZGUnLCBjb250YWluZXIpO1xuICAgIGxldCBhbGxBY3Rpb24gPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnYWxsQWN0aW9uJywgYWN0aW9uU2xpZGUpO1xuICAgIGZvciAobGV0IGk9MDsgaTxkYi5BY3Rpb24ubGVuZ3RoOyBpKyspe1xuICAgICAgICBsZXQgb25lQWN0aW9uID0gaW5zZXJ0RWxlbWVudCgnZGl2JywgJ29uZUFjdGlvbicsIGFsbEFjdGlvbik7XG4gICAgICAgIGluc2VydEltZygnaW1nJywgJ2FjdEltZycsIGRiLkFjdGlvbltpXS5pbWFnZSxvbmVBY3Rpb24pO1xuICAgICAgICBsZXQgYWNCdG4gPSBpbnNlcnRFbGVtZW50RGV0YWlscygnaW5wdXQnLCAnYWN0aW9uJywgJ2J1dHRvbicsIG9uZUFjdGlvbik7XG4gICAgICAgIGFjQnRuLnZhbHVlID0gJ9CU0LXRgtCw0LvRjNC90ZbRiNC1JztcbiAgICAgICAgYWNCdG4uaWQ9ZGIuQWN0aW9uW2ldLmlkO1xuICAgIH1cbiAgICBsZXQgd2hhdEFjdGlvbiA9IGluc2VydEVsZW1lbnQoJ2RpdicsICd3aGF0QWN0aW9uJywgYWN0aW9uU2xpZGUpO1xuICAgIHdoYXRBY3Rpb24uc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucz0nIDdmciByZXBlYXQoJytkYi5BY3Rpb24ubGVuZ3RoKycsMWZyKSA3ZnInO1xuICAgIGluc2VydEVsZW1lbnQoJ2RpdicsICcnLCB3aGF0QWN0aW9uKTtcbiAgICBmb3IgKGxldCBxPTA7IHE8ZGIuQWN0aW9uLmxlbmd0aDsgcSsrKXtcbiAgICAgICAgaW5zZXJ0RWxlbWVudCgnZGl2JywgJ251bWJlcicsIHdoYXRBY3Rpb24pO1xuICAgIH1cbiAgICBpbnNlcnRFbGVtZW50KCdkaXYnLCAnJywgd2hhdEFjdGlvbik7XG4gICAgbGV0IGNhdGVnb3J5SGl0PWluc2VydEVsZW1lbnQoJ2gxJywgJ2NhdGVnb3J5SGl0JywgY29udGFpbmVyKTtcbiAgICBjYXRlZ29yeUhpdC5pbm5lckhUTUw9J9CT0LDRgNGP0YfQsCDQv9GA0L7Qv9C+0LfQuNGG0ZbRjyc7XG4gICAgbGV0IHJlY29tZW5kSGl0PWluc2VydEVsZW1lbnQoJ2RpdicsICdyZWNvbWVuZEhpdCcsIGNvbnRhaW5lcik7XG4gICAgZm9yIChsZXQgcT0wOyBxPGRiLnByb2R1Y3RzLmxlbmd0aDsgcSsrKXtcbiAgICAgICAgaWYgKGRiLnByb2R1Y3RzW3FdLmlzSGl0KXtcbiAgICAgICAgICAgIGxldCBvbmVQcm9kdWN0PWluc2VydEVsZW1lbnQoJ2RpdicsICdvbmVQcm9kdWN0JywgcmVjb21lbmRIaXQpO1xuICAgICAgICAgICAgaW5zZXJ0SW1nKCdpbWcnLCcnLCBkYi5wcm9kdWN0c1txXS5pbWcsb25lUHJvZHVjdCkuaWQ9ZGIucHJvZHVjdHNbcV0uaWQ7XG4gICAgICAgICAgICBsZXQgdGV4dERpdj1pbnNlcnRFbGVtZW50KCdkaXYnLCAnJywgb25lUHJvZHVjdCk7XG4gICAgICAgICAgICBsZXQgcHJvZHVjdE5hbWUgPSBpbnNlcnRFbGVtZW50KCdwJywgJ3Byb2R1Y3ROYW1lJywgdGV4dERpdik7XG4gICAgICAgICAgICBwcm9kdWN0TmFtZS5pbm5lckhUTUw9ZGIucHJvZHVjdHNbcV0ucHJvZHVjdE5hbWU7XG4gICAgICAgICAgICBwcm9kdWN0TmFtZS5pZD1kYi5wcm9kdWN0c1txXS5pZDtcbiAgICAgICAgICAgIGluc2VydEVsZW1lbnQoJ3AnLCAncHJvZHVjdENvbXBvbmVudHMnLCB0ZXh0RGl2KS5pbm5lckhUTUw9ZGIucHJvZHVjdHNbcV0uY29tcG9uZW50cztcbiAgICAgICAgICAgIGluc2VydEVsZW1lbnQoJ3AnLCAncHJpY2UnLCB0ZXh0RGl2KS5pbm5lckhUTUw9ZGIucHJvZHVjdHNbcV0ucHJpY2UrJyDQs9GA0L0nO1xuICAgICAgICAgICAgbGV0IGFjQnRuID0gaW5zZXJ0RWxlbWVudERldGFpbHMoJ2lucHV0JywgJ29yZGVyJywgJ2J1dHRvbicsIG9uZVByb2R1Y3QpO1xuICAgICAgICAgICAgYWNCdG4udmFsdWUgPSAn0JTQviDQutC+0YDQt9C40L3QuCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBtb3ZlSW1nKGFsbEFjdGlvbik7XG4gICAgfSwgNTAwMCk7XG59XG5cbmZ1bmN0aW9uIGNhdGFsb2dGdWxsKGNvbnRhaW5lciwgZGIpe1xuICAgIGxldCBjYXRhbG9nID0gaW5zZXJ0RWxlbWVudCgnZGl2JywgJ2NhdGFsb2cnLCBjb250YWluZXIpO1xuICAgIGZvciAobGV0IGk9MDsgaTxkYi5jYXRlZ29yeS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGxldCBjdGVnb3J5TmFtZSA9IGluc2VydEVsZW1lbnQoJ2gyJywgJ2N0ZWdvcnlOYW1lJywgY2F0YWxvZyk7XG4gICAgICAgIGN0ZWdvcnlOYW1lLmlubmVySFRNTD1kYi5jYXRlZ29yeVtpXS5uYW1lO1xuICAgICAgICBsZXQgcHJvZHVjdExpc3QgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAncHJvZHVjdExpc3QnLCBjYXRhbG9nKTtcbiAgICAgICAgZm9yIChsZXQgcT0wOyBxPGRiLnByb2R1Y3RzLmxlbmd0aDsgcSsrKXtcbiAgICAgICAgICAgIGlmIChkYi5wcm9kdWN0c1txXS5jYXRlZ29yeUlkID09PSBkYi5jYXRlZ29yeVtpXS5pZCl7XG4gICAgICAgICAgICAgICAgbGV0IG9uZVByb2R1Y3Q9aW5zZXJ0RWxlbWVudCgnZGl2JywgJ29uZVByb2R1Y3QnLCBwcm9kdWN0TGlzdCk7XG4gICAgICAgICAgICAgICAgaW5zZXJ0SW1nKCdpbWcnLCcnLCBkYi5wcm9kdWN0c1txXS5pbWcsb25lUHJvZHVjdCkuaWQ9ZGIucHJvZHVjdHNbcV0uaWQ7XG4gICAgICAgICAgICAgICAgbGV0IHRleHREaXY9aW5zZXJ0RWxlbWVudCgnZGl2JywgJycsIG9uZVByb2R1Y3QpO1xuICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0TmFtZT1pbnNlcnRFbGVtZW50KCdwJywgJ3Byb2R1Y3ROYW1lJywgdGV4dERpdik7XG4gICAgICAgICAgICAgICAgcHJvZHVjdE5hbWUuaW5uZXJIVE1MPWRiLnByb2R1Y3RzW3FdLnByb2R1Y3ROYW1lO1xuICAgICAgICAgICAgICAgIHByb2R1Y3ROYW1lLmlkPWRiLnByb2R1Y3RzW3FdLmlkO1xuICAgICAgICAgICAgICAgIGluc2VydEVsZW1lbnQoJ3AnLCAncHJvZHVjdENvbXBvbmVudHMnLCB0ZXh0RGl2KS5pbm5lckhUTUw9ZGIucHJvZHVjdHNbcV0uY29tcG9uZW50cztcbiAgICAgICAgICAgICAgICBpbnNlcnRFbGVtZW50KCdwJywgJ3ByaWNlJywgdGV4dERpdikuaW5uZXJIVE1MPWRiLnByb2R1Y3RzW3FdLnByaWNlKycg0LPRgNC9JztcbiAgICAgICAgICAgICAgICBsZXQgYWNCdG4gPSBpbnNlcnRFbGVtZW50RGV0YWlscygnaW5wdXQnLCAnb3JkZXInLCAnYnV0dG9uJywgb25lUHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgYWNCdG4udmFsdWUgPSAn0JTQviDQutC+0YDQt9C40L3QuCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2R1Y3RMaXN0LmNoaWxkTm9kZXMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgICAgIGN0ZWdvcnlOYW1lLnJlbW92ZSgpO1xuICAgICAgICAgICAgcHJvZHVjdExpc3QucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhdGFsb2dPbmVGdWxsKGNvbnRhaW5lciwgZGIsIGhhc2hJZCl7XG4gICAgbGV0IGNhdGFsb2cgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnY2F0YWxvZycsIGNvbnRhaW5lcik7XG4gICAgbGV0IGN0ZWdvcnlOYW1lID0gaW5zZXJ0RWxlbWVudCgnaDInLCAnY3RlZ29yeU5hbWUnLCBjYXRhbG9nKTtcbiAgICBjdGVnb3J5TmFtZS5pbm5lckhUTUw9ZGIuY2F0ZWdvcnlbaGFzaElkXS5uYW1lO1xuICAgIGxldCBwcm9kdWN0TGlzdCA9IGluc2VydEVsZW1lbnQoJ2RpdicsICdwcm9kdWN0TGlzdCcsIGNhdGFsb2cpO1xuICAgIGZvciAobGV0IHE9MDsgcTxkYi5wcm9kdWN0cy5sZW5ndGg7IHErKyl7XG4gICAgICAgIGlmIChkYi5wcm9kdWN0c1txXS5jYXRlZ29yeUlkID09PSBkYi5jYXRlZ29yeVtoYXNoSWRdLmlkKXtcbiAgICAgICAgICAgIGxldCBvbmVQcm9kdWN0PWluc2VydEVsZW1lbnQoJ2RpdicsICdvbmVQcm9kdWN0JywgcHJvZHVjdExpc3QpO1xuICAgICAgICAgICAgaW5zZXJ0SW1nKCdpbWcnLCcnLCBkYi5wcm9kdWN0c1txXS5pbWcsb25lUHJvZHVjdCkuaWQ9ZGIucHJvZHVjdHNbcV0uaWQ7XG4gICAgICAgICAgICBsZXQgdGV4dERpdj1pbnNlcnRFbGVtZW50KCdkaXYnLCAnJywgb25lUHJvZHVjdCk7XG4gICAgICAgICAgICBsZXQgcHJvZHVjdE5hbWU9aW5zZXJ0RWxlbWVudCgncCcsICdwcm9kdWN0TmFtZScsIHRleHREaXYpO1xuICAgICAgICAgICAgcHJvZHVjdE5hbWUuaW5uZXJIVE1MPWRiLnByb2R1Y3RzW3FdLnByb2R1Y3ROYW1lO1xuICAgICAgICAgICAgcHJvZHVjdE5hbWUuaWQ9ZGIucHJvZHVjdHNbcV0uaWQ7XG4gICAgICAgICAgICBpbnNlcnRFbGVtZW50KCdwJywgJ3Byb2R1Y3RDb21wb25lbnRzJywgdGV4dERpdikuaW5uZXJIVE1MPWRiLnByb2R1Y3RzW3FdLmNvbXBvbmVudHM7XG4gICAgICAgICAgICBpbnNlcnRFbGVtZW50KCdwJywgJ3ByaWNlJywgdGV4dERpdikuaW5uZXJIVE1MPWRiLnByb2R1Y3RzW3FdLnByaWNlKycg0LPRgNC9JztcbiAgICAgICAgICAgIGxldCBhY0J0biA9IGluc2VydEVsZW1lbnREZXRhaWxzKCdpbnB1dCcsICdvcmRlcicsICdidXR0b24nLCBvbmVQcm9kdWN0KTtcbiAgICAgICAgICAgIGFjQnRuLnZhbHVlID0gJ9CU0L4g0LrQvtGA0LfQuNC90LgnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9kdWN0TGlzdC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGN0ZWdvcnlOYW1lLnJlbW92ZSgpO1xuICAgICAgICBwcm9kdWN0TGlzdC5yZW1vdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFjdGlvbk9uZUZ1bGwoY29udGFpbmVyLCBkYiwgaGFzaElkKXtcbiAgICBsZXQgYWJvdXRBY3QgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnYWJvdXRBY3QnLCBjb250YWluZXIpO1xuICAgIGluc2VydEVsZW1lbnQoJ3AnLCAnb25lQWN0aW9uTmFtZScsIGFib3V0QWN0KS5pbm5lckhUTUwgPSBkYi5BY3Rpb25baGFzaElkXS5uYW1lO1xuICAgIGluc2VydEVsZW1lbnQoJ3AnLCAnYWN0aW9uVGltZScsIGFib3V0QWN0KS5pbm5lckhUTUwgPSAn0J7Qv9GD0LHQu9GW0LrQvtCy0LDQvdC+OiAnICsgZGIuQWN0aW9uW2hhc2hJZF0uZGF0ZVBvc3RlZDtcbiAgICBpbnNlcnRJbWcoJ2ltZycsICdvbmVBQ3Rpb25JbWcnLCBkYi5BY3Rpb25baGFzaElkXS5pbWFnZSxhYm91dEFjdCk7XG4gICAgaW5zZXJ0RWxlbWVudCgncCcsICdvbmVBY3Rpb25EZXNjcmlwdGlvbicsIGFib3V0QWN0KS5pbm5lckhUTUwgPSBkYi5BY3Rpb25baGFzaElkXS5hYm91dDtcbn1cblxuZnVuY3Rpb24gb25lUHJvZHVjdEZ1bGwoY29udGFpbmVyLCBkYiwgaGFzaElkKXtcbiAgICBsZXQgYWJvdXRQcm9kdWN0ID0gaW5zZXJ0RWxlbWVudCgnZGl2JywgJ2Fib3V0UHJvZHVjdCcsIGNvbnRhaW5lcik7XG4gICAgbGV0IGFsbFByb2RJbWcgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnYWxsUHJvZEltZycsIGFib3V0UHJvZHVjdCk7XG4gICAgaW5zZXJ0SW1nKCdpbWcnLCAncHJvZHVjdEltZycsIGRiLnByb2R1Y3RzW2hhc2hJZF0uaW1nLCBhbGxQcm9kSW1nKS5pZCA9IGRiLnByb2R1Y3RzW2hhc2hJZF0uaWQ7XG4gICAgaW5zZXJ0RWxlbWVudCgncCcsICdvbmVQcm9kdWN0TmFtZScsIGFib3V0UHJvZHVjdCkuaW5uZXJIVE1MPWRiLnByb2R1Y3RzW2hhc2hJZF0ucHJvZHVjdE5hbWU7XG4gICAgbGV0IG9uZVByaWNlID0gaW5zZXJ0RWxlbWVudCgncCcsICdwcmljZScsIGFib3V0UHJvZHVjdCk7XG4gICAgb25lUHJpY2UuaW5uZXJIVE1MPSfRhtGW0L3QsDogJytkYi5wcm9kdWN0c1toYXNoSWRdLnByaWNlICsgJyDQs9GA0L0nO1xuICAgIG9uZVByaWNlLnN0eWxlLmZvbnRTaXplPScyLjV2dyc7XG4gICAgb25lUHJpY2Uuc3R5bGUuY29sb3I9J3doaXRlJztcbiAgICBvbmVQcmljZS5zdHlsZS50b3AgPSAnMzB2aCc7XG4gICAgb25lUHJpY2Uuc3R5bGUubGVmdCA9ICctMi41dncnO1xuICAgIGxldCBhY0J0biA9IGluc2VydEVsZW1lbnREZXRhaWxzKCdpbnB1dCcsICdvcmRlcicsICdidXR0b24nLCBhbGxQcm9kSW1nKTtcbiAgICBhY0J0bi52YWx1ZSA9ICfQlNC+INC60L7RgNC30LjQvdC4JztcbiAgICBhY0J0bi5zdHlsZS50b3A9JzI4dncnO1xuICAgIGFjQnRuLnN0eWxlLmxlZnQ9JzQwdncnO1xuICAgIGFjQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvcj0naW5kaWFucmVkJztcbiAgICBpbnNlcnRFbGVtZW50KCdwJywgJ29uZVByb2R1Y3REZXNjcmlwdGlvbicsIGFib3V0UHJvZHVjdCkuaW5uZXJIVE1MID0gZGIucHJvZHVjdHNbaGFzaElkXS5jb21wb25lbnRzO1xuXG4gICAgbGV0IGNvbmVjdGVkQWxsID0gaW5zZXJ0RWxlbWVudCgnZGl2JywgJ2NvbmVjdGVkQWxsJywgY29udGFpbmVyKTtcbiAgICBpbnNlcnRFbGVtZW50KCdoMicsICdjb25lY3RlZCcsIGNvbmVjdGVkQWxsKS5pbm5lckhUTUw9J9Cf0L7QslxcJ9GP0LfQsNC90ZYg0L/RgNC+0LTRg9C60YLQuCc7XG4gICAgbGV0IG15UHJvZHVjdD1kYi5wcm9kdWN0c1toYXNoSWRdO1xuICAgIGxldCBwcm9kdWN0TGlzdCA9IGluc2VydEVsZW1lbnQoJ2RpdicsICdwcm9kdWN0TGlzdCcsIGNvbmVjdGVkQWxsKTtcbiAgICBmb3IgKGxldCBpPTA7IGk8bXlQcm9kdWN0LnNpbWlsYXIubGVuZ3RoOyBpKyspe1xuICAgICAgICBsZXQgcHJvZElkPW15UHJvZHVjdC5zaW1pbGFyW2ldO1xuICAgICAgICBsZXQgY29uZWN0UHJvZCA9IGRiLnByb2R1Y3RzW3Byb2RJZF07XG4gICAgICAgIGxldCBvbmVQcm9kdWN0PWluc2VydEVsZW1lbnQoJ2RpdicsICdvbmVQcm9kdWN0JywgcHJvZHVjdExpc3QpO1xuICAgICAgICBpbnNlcnRJbWcoJ2ltZycsJycsIGNvbmVjdFByb2QuaW1nLCBvbmVQcm9kdWN0KS5pZD1jb25lY3RQcm9kLmlkO1xuICAgICAgICBsZXQgdGV4dERpdj1pbnNlcnRFbGVtZW50KCdkaXYnLCAnJywgb25lUHJvZHVjdCk7XG4gICAgICAgIGxldCBwcm9kdWN0TmFtZT1pbnNlcnRFbGVtZW50KCdwJywgJ3Byb2R1Y3ROYW1lJywgdGV4dERpdik7XG4gICAgICAgIHByb2R1Y3ROYW1lLmlubmVySFRNTD1jb25lY3RQcm9kLnByb2R1Y3ROYW1lO1xuICAgICAgICBwcm9kdWN0TmFtZS5pZD1jb25lY3RQcm9kLmlkO1xuICAgICAgICBpbnNlcnRFbGVtZW50KCdwJywgJ3Byb2R1Y3RDb21wb25lbnRzJywgdGV4dERpdikuaW5uZXJIVE1MPWNvbmVjdFByb2QuY29tcG9uZW50cztcbiAgICAgICAgaW5zZXJ0RWxlbWVudCgncCcsICdwcmljZScsIHRleHREaXYpLmlubmVySFRNTD1jb25lY3RQcm9kLnByaWNlKycg0LPRgNC9JztcbiAgICAgICAgbGV0IGFjQnRuID0gaW5zZXJ0RWxlbWVudERldGFpbHMoJ2lucHV0JywgJ29yZGVyJywgJ2J1dHRvbicsIG9uZVByb2R1Y3QpO1xuICAgICAgICBhY0J0bi52YWx1ZSA9ICfQlNC+INC60L7RgNC30LjQvdC4JztcbiAgICB9XG59XG5cbmxldCBzdGFydCA9IG51bGw7XG5mdW5jdGlvbiBiYW5lcnN0ZXAoY3VycmVudFRpbWUpIHtcbiAgICBpZiAoIXN0YXJ0KSBzdGFydCA9IGN1cnJlbnRUaW1lO1xuICAgIHZhciBwcm9jZXNzID0gY3VycmVudFRpbWUtc3RhcnQ7XG4gICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0QmFuZXInKTtcbiAgICBpZihwcm9jZXNzID4gNTAwKXtlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAoMTAwIC0gKHByb2Nlc3MtNTAwKS81KSsnJSc7fVxuICAgIGVsc2V7ZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gKChwcm9jZXNzKS81KSsnJSc7fVxuICAgIGlmIChwcm9jZXNzIDwgMTAwMCkge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGJhbmVyc3RlcCk7XG4gICAgfVxuICAgIGVsc2V7c3RhcnQ9bnVsbDt9XG59XG5cbmZ1bmN0aW9uIG1vdmVJbWcocGFyZW50KSB7XG4gICAgbGV0IHN0YXJ0U2Nyb2xsPXBhcmVudC5zY3JvbGxMZWZ0O1xuICAgIGxldCBpbmZpbml0eXN0YXJ0PW51bGw7XG4gICAgbGV0IGluZmluaXR5ZW5kPW51bGw7XG4gICAgbGV0IGZpcnN0bW92ZT10cnVlO1xuICAgIGZ1bmN0aW9uIHNsaWRlclVwKGN1cnJlbnRUaW1lKSB7XG4gICAgICAgIGlmICghaW5maW5pdHlzdGFydCkgaW5maW5pdHlzdGFydCA9IGN1cnJlbnRUaW1lO1xuICAgICAgICBsZXQgcHJvY2VzcyA9IGN1cnJlbnRUaW1lLWluZmluaXR5c3RhcnQ7XG4gICAgICAgIGxldCB0bXBzY3JvbGwgPSBwYXJlbnQuc2Nyb2xsTGVmdDtcbiAgICAgICAgaWYocHJvY2Vzcz4xMDAwKXtwcm9jZXNzPTEwMDA7fVxuICAgICAgICBwYXJlbnQuc2Nyb2xsTGVmdCA9IHN0YXJ0U2Nyb2xsICsgcGFyZW50Lm9mZnNldFdpZHRoKihwcm9jZXNzLzEwMDApO1xuICAgICAgICBpZihwYXJlbnQuc2Nyb2xsTGVmdCA9PT0gdG1wc2Nyb2xsICYmICFmaXJzdG1vdmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2xpZGVyRG93bik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvY2VzcyA8IDEwMDApIHtcbiAgICAgICAgICAgIGZpcnN0bW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzbGlkZXJVcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2xpZGVyRG93bihjdXJyZW50VGltZSkge1xuICAgICAgICBpZiAoIWluZmluaXR5ZW5kKSBpbmZpbml0eWVuZCA9IGN1cnJlbnRUaW1lO1xuICAgICAgICBsZXQgcHJvY2VzcyA9IGN1cnJlbnRUaW1lIC0gaW5maW5pdHllbmQ7XG4gICAgICAgIGlmKHByb2Nlc3MgPiAxMDAwKXtwcm9jZXNzID0gMTAwMDt9XG4gICAgICAgIHBhcmVudC5zY3JvbGxMZWZ0ID0gc3RhcnRTY3JvbGwqKDEtcHJvY2Vzcy8xMDAwKTtcbiAgICAgICAgaWYgKHByb2Nlc3MgPCAxMDAwKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNsaWRlckRvd24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGFpbnREb3QocGFyZW50KTtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNsaWRlclVwKTtcbn1cblxuZnVuY3Rpb24gcmVwYWludERvdChwYXJlbnQpIHtcbiAgICBsZXQgZG90cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ251bWJlcicpO1xuICAgIGlmKGRvdHMubGVuZ3RoIDwgMSl7cmV0dXJuO31cbiAgICBsZXQgbnVtYmVyID0gTWF0aC5yb3VuZChwYXJlbnQuc2Nyb2xsTGVmdC9wYXJlbnQub2Zmc2V0V2lkdGgpO1xuICAgIGlmKG51bWJlciA8IGRvdHMubGVuZ3RoIC0gMSl7XG4gICAgICAgIGZvcihsZXQgcSA9IDA7IHEgPCBkb3RzLmxlbmd0aDtxKyspXG4gICAgICAgICAgICBkb3RzW3FdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgIGRvdHNbbnVtYmVyICsgMV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyYXknO1xuICAgIH1cbiAgICBpZihudW1iZXIgPT09IGRvdHMubGVuZ3RoIC0gMSl7XG4gICAgICAgIGZvcihsZXQgcSA9IDA7IHEgPCBkb3RzLmxlbmd0aDsgcSsrKVxuICAgICAgICAgICAgZG90c1txXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnd2hpdGUnO1xuICAgICAgICBkb3RzWzBdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmF5JztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9yZGVyRnVsbChjb250YWluZXIpe1xuICAgIGxldCBvcHRpb24gPSBbJ0jQvtC80LXRgCDRgtC10LvQtdGE0L7QvdGDIConLCAnRW1haWwnLCAn0J/QhtCRJywgJ9CQ0LTRgNC10YHQsCAqJywgJ9Cn0LDRgSDQtNC+0YHRgtCw0LLQutC4IConLCAn0JLQsNGA0ZbQsNC90YIg0L7Qv9C70LDRgtC4J107XG4gICAgbGV0IGFyZWEgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnYXJlYScsIGNvbnRhaW5lcik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb24ubGVuZ3RoOyBpKyspe1xuICAgICAgICBsZXQgZnVuY3Rpb25OYW1lID0gaW5zZXJ0RWxlbWVudCgncCcsICdmdW5jdGlvbk5hbWUnLCBhcmVhKTtcbiAgICAgICAgZnVuY3Rpb25OYW1lLmlubmVySFRNTCA9IG9wdGlvbltpXTtcbiAgICAgICAgZnVuY3Rpb25OYW1lLmlkID0gaSArICduYW1lJztcbiAgICAgICAgaW5zZXJ0RWxlbWVudCgndGV4dGFyZWEnLCAnZnVuY3Rpb25JbnB1dCcsIGFyZWEpLmlkID0gaSArICd0ZXh0JztcbiAgICB9XG4gICAgaW5zZXJ0RWxlbWVudCgnZGl2JywgJ3Nob3BCYXNrZXQnLCBjb250YWluZXIpO1xuICAgIGxldCBQdXRPcmRlciA9IGluc2VydEVsZW1lbnREZXRhaWxzKCdpbnB1dCcsICdQdXRPcmRlcicsICdidXR0b24nLCBjb250YWluZXIpO1xuICAgIFB1dE9yZGVyLnZhbHVlID0gJ9Ce0YTQvtGA0LzQuNGC0Lgg0LfQsNC80L7QstC70LXQvdC90Y8nO1xufVxuXG5mdW5jdGlvbiBiYXNrZXRGdWxsKGNvbnRhaW5lciwgZGIsIG9yZGVyKXtcbiAgICBpbnNlcnRFbGVtZW50KCdkaXYnLCAnb3JkZXJCdG4nLCBjb250YWluZXIpLmlubmVySFRNTCA9ICfQl9Cw0LzQvtCy0LjRgtC4JztcbiAgICBsZXQgYmF5QWxsID0gaW5zZXJ0RWxlbWVudCgnZGl2JywgJ2JheUFsbCcsIGNvbnRhaW5lcik7XG4gICAgaW5zZXJ0RWxlbWVudCgnaDInLCAnY29uZWN0ZWQnLCBiYXlBbGwpLmlubmVySFRNTCA9ICfQmtC+0YjQuNC6JztcbiAgICBpbnNlcnRFbGVtZW50KCdkaXYnLCAnc2hvcEJhc2tldCcsIGJheUFsbCk7XG4gICAgbGV0IHByb2R1Y3RMaXN0ID0gaW5zZXJ0RWxlbWVudCgnZGl2JywgJ3Byb2R1Y3RMaXN0JywgYmF5QWxsKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSArPSAyKXtcbiAgICAgICAgbGV0IG15UHJvZCA9IGRiLnByb2R1Y3RzW29yZGVyW2ldXTtcbiAgICAgICAgbGV0IG9uZVByb2R1Y3QgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnb25lUHJvZHVjdCcsIHByb2R1Y3RMaXN0KTtcbiAgICAgICAgb25lUHJvZHVjdC5zdHlsZS5oZWlnaHQgPSAnMzAwcHgnO1xuICAgICAgICBpbnNlcnRJbWcoJ2ltZycsJycsIG15UHJvZC5pbWcsb25lUHJvZHVjdCkuaWQ9bXlQcm9kLmlkO1xuICAgICAgICBpbnNlcnRFbGVtZW50KCdwJywgJ2NvdW50ZXJPcmRlcmVkJywgb25lUHJvZHVjdCkuaW5uZXJIVE1MPW9yZGVyW2krMV07XG4gICAgICAgIGxldCB0ZXh0RGl2ID0gaW5zZXJ0RWxlbWVudCgnZGl2JywgJycsIG9uZVByb2R1Y3QpO1xuICAgICAgICBsZXQgcHJvZHVjdE5hbWUgPSBpbnNlcnRFbGVtZW50KCdwJywgJ3Byb2R1Y3ROYW1lJywgdGV4dERpdik7XG4gICAgICAgIHByb2R1Y3ROYW1lLmlubmVySFRNTCA9IG15UHJvZC5wcm9kdWN0TmFtZTtcbiAgICAgICAgcHJvZHVjdE5hbWUuaWQgPSBteVByb2QuaWQ7XG4gICAgICAgIGluc2VydEVsZW1lbnQoJ3AnLCAncHJvZHVjdENvbXBvbmVudHMnLCB0ZXh0RGl2KS5pbm5lckhUTUwgPSBteVByb2QuY29tcG9uZW50cztcbiAgICAgICAgaW5zZXJ0RWxlbWVudCgncCcsICdwcmljZScsIHRleHREaXYpLmlubmVySFRNTCA9IG15UHJvZC5wcmljZSsnINCz0YDQvSc7XG4gICAgICAgIGxldCBhY0J0biA9IGluc2VydEVsZW1lbnREZXRhaWxzKCdpbnB1dCcsICdvcmRlcicsICdidXR0b24nLCBvbmVQcm9kdWN0KTtcbiAgICAgICAgYWNCdG4udmFsdWUgPSAn0JTQvtC00LDRgtC4INGJ0LUg0L7QtNC40L3QuNGG0Y4nO1xuICAgICAgICBhY0J0bi5zdHlsZS5mb250U2l6ZSA9ICcyLjN2aCc7XG4gICAgICAgIGFjQnRuLnN0eWxlLnRvcCA9ICc1N3ZoJztcbiAgICAgICAgYWNCdG4uc3R5bGUubGVmdCA9ICc1LjR2dyc7XG4gICAgICAgIGxldCBkZWxCdG4gPSBpbnNlcnRFbGVtZW50RGV0YWlscygnaW5wdXQnLCAndW5vcmRlcicsICdidXR0b24nLCBvbmVQcm9kdWN0KTtcbiAgICAgICAgZGVsQnRuLnZhbHVlID0gJ9CS0LjQu9GD0YfQuNGC0Lgg0L7QtNC40L3QuNGG0Y4nO1xuICAgICAgICBkZWxCdG4uc3R5bGUuZm9udFNpemUgPSAnMi4zdmgnO1xuICAgICAgICBkZWxCdG4uc3R5bGUubGVmdCA9ICcxMS41dmgnO1xuICAgICAgICBkZWxCdG4uc3R5bGUudG9wID0gJzUydmgnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5zZXJ0RWxlbWVudCh0eXBlLCBlbENsYXNzTmFtZSwgcGFyZW50KVxue1xuICAgIGxldCBuZXdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgbmV3RWwuY2xhc3NOYW1lID0gZWxDbGFzc05hbWU7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKG5ld0VsKTtcbiAgICByZXR1cm4gbmV3RWw7XG59XG5mdW5jdGlvbiBpbnNlcnRFbGVtZW50RGV0YWlscyh0eXBlLCBlbENsYXNzTmFtZSwgdHlwZU9mLCBwYXJlbnQpXG57XG4gICAgbGV0IG5ld0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICBuZXdFbC5jbGFzc05hbWUgPSBlbENsYXNzTmFtZTtcbiAgICBuZXdFbC50eXBlID0gdHlwZU9mO1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChuZXdFbCk7XG4gICAgcmV0dXJuIG5ld0VsO1xufVxuZnVuY3Rpb24gaW5zZXJ0SW1nKHR5cGUsIGVsQ2xhc3NOYW1lLCBzcmMsIHBhcmVudClcbntcbiAgICBsZXQgbmV3RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgIG5ld0VsLmNsYXNzTmFtZSA9IGVsQ2xhc3NOYW1lO1xuICAgIG5ld0VsLnNyYyA9IHNyYztcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQobmV3RWwpO1xuICAgIHJldHVybiBuZXdFbDtcbn1cbmZ1bmN0aW9uIGluc2VydEVsZW1lbnRJblBsYWNlKHR5cGUsIGVsQ2xhc3NOYW1lLCBwYXJlbnQsIHBsYWNlKVxue1xuICAgIGxldCBuZXdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgbmV3RWwuY2xhc3NOYW1lID0gZWxDbGFzc05hbWU7XG4gICAgcGFyZW50Lmluc2VydEFkamFjZW50RWxlbWVudChwbGFjZSwgbmV3RWwpO1xuICAgIHJldHVybiBuZXdFbDtcbn1cbmZ1bmN0aW9uIG9uUmVhZHkoY2FsbGJhY2spIHtcbiAgICB2YXIgaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbnRhaW5lcicpWzBdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH0sIDgwMCk7XG59XG5leHBvcnR7aW5kZXhGdWxsLCBjYXRhbG9nRnVsbCwgY2F0YWxvZ09uZUZ1bGwsIGFjdGlvbk9uZUZ1bGwsIG9uZVByb2R1Y3RGdWxsLCBiYXNrZXRGdWxsLCBpbnNlcnRFbGVtZW50SW5QbGFjZSxcbiAgICBpbnNlcnRJbWcsIGluc2VydEVsZW1lbnREZXRhaWxzLCBpbnNlcnRFbGVtZW50LCBvblJlYWR5LCBiYW5lcnN0ZXAsIG9yZGVyRnVsbCwgbW92ZUltZ307IiwiaW1wb3J0IHtmZXRjaE15RGF0YSxwb3N0T3JkZXJ9IGZyb20gJy4vZmV0Y2guanMnO1xuaW1wb3J0IHtpbmRleEZ1bGwsIGNhdGFsb2dGdWxsLGNhdGFsb2dPbmVGdWxsLGFjdGlvbk9uZUZ1bGwsb25lUHJvZHVjdEZ1bGwsYmFza2V0RnVsbCwgaW5zZXJ0RWxlbWVudEluUGxhY2UsXG4gICAgaW5zZXJ0RWxlbWVudCxvblJlYWR5LGJhbmVyc3RlcCxvcmRlckZ1bGwsIG1vdmVJbWd9IGZyb20gJy4vc3R5bGUuanMnO1xubGV0IG9yZGVyID0gW107XG5sZXQgb3JkZXJDYXNlPVsnJywnJywnJywnJywnJywnJ107XG5cbm9uUmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmcnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbnRhaW5lcicpWzBdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zvb3RlcicpWzBdLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG59KTtcbmNsYXNzIHNjcmVlbkNyZWF0ZXtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIGRiLCBzaXRlVXJsKXtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgdGhpcy5zaXRlVXJsID0gc2l0ZVVybDtcbiAgICAgICAgdGhpcy5oYXNoSWQgPSAtMTtcbiAgICAgICAgaWYgKHNpdGVVcmwubGVuZ3RoID4gMSkge3RoaXMuaGFzaElkID0gcGFyc2VJbnQoc2l0ZVVybFsxXSk7fVxuICAgIH1cbiAgICByZW5kZXJTY3JlZW4oKSB7XG4gICAgICAgIHN3aXRjaCh0aGlzLnNpdGVVcmxbMF0pe1xuICAgICAgICBjYXNlICcjY2F0YWxvZyc6e2lmKHRoaXMuaGFzaElkICE9PSAtMSl7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNoSWQgPj0gMCAmJiB0aGlzLmhhc2hJZCA8IHRoaXMuZGIuY2F0ZWdvcnkubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGNhdGFsb2dPbmVGdWxsKHRoaXMuY29udGFpbmVyLCB0aGlzLmRiLCB0aGlzLmhhc2hJZCk7XG4gICAgICAgICAgICBlbHNlICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgY2F0YWxvZ0Z1bGwodGhpcy5jb250YWluZXIsIHRoaXMuZGIpO1xuICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICcjb25lQWN0aW9uJzp7aWYgKHRoaXMuaGFzaElkID49IDAgJiYgdGhpcy5oYXNoSWQgPCB0aGlzLmRiLkFjdGlvbi5sZW5ndGgpXG4gICAgICAgICAgICBhY3Rpb25PbmVGdWxsKHRoaXMuY29udGFpbmVyLCB0aGlzLmRiLCB0aGlzLmhhc2hJZCk7XG4gICAgICAgIGVsc2UgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJyNvbmVQcm9kdWN0UGFnZSc6e2lmICh0aGlzLmhhc2hJZCA+PSAwICYmIHRoaXMuaGFzaElkIDwgdGhpcy5kYi5wcm9kdWN0cy5sZW5ndGgpXG4gICAgICAgICAgICBvbmVQcm9kdWN0RnVsbCh0aGlzLmNvbnRhaW5lciwgdGhpcy5kYiwgdGhpcy5oYXNoSWQpO1xuICAgICAgICBlbHNlICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcnO1xuICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICcjYmFza2V0UGFnZSc6eyBiYXNrZXRGdWxsKHRoaXMuY29udGFpbmVyLCB0aGlzLmRiLCBvcmRlcik7cmVmcmVzaENvdW50ZXIoKTticmVhazt9XG4gICAgICAgIGNhc2UgJyNjcmVhdGVPcmRlcic6eyBpZiAoKEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvcmRlcnMnKSkpLmxlbmd0aD4wKVxuICAgICAgICB7b3JkZXJGdWxsKHRoaXMuY29udGFpbmVyKTsgcmVmcmVzaENvdW50ZXIoKTt9XG4gICAgICAgIGVsc2Uge3dpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyc7fVxuICAgICAgICBicmVhazt9XG4gICAgICAgIGRlZmF1bHQ6IHt3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcnO2luZGV4RnVsbCh0aGlzLmNvbnRhaW5lciwgdGhpcy5kYik7YnJlYWs7fVxuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgT3JkZXJ7XG4gICAgY29uc3RydWN0b3IodGV4dEFyZWEsIG9yZGVyTGlzdCl7XG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSB0ZXh0QXJlYVswXS52YWx1ZTtcbiAgICAgICAgdGhpcy5tYWlsID0gdGV4dEFyZWFbMV0udmFsdWU7XG4gICAgICAgIHRoaXMubmFtZSA9IHRleHRBcmVhWzJdLnZhbHVlO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSB0ZXh0QXJlYVszXS52YWx1ZTtcbiAgICAgICAgdGhpcy5kYXRlID0gdGV4dEFyZWFbNF0udmFsdWU7XG4gICAgICAgIGlmICh0ZXh0QXJlYVs1XS52YWx1ZSA9PT0gJ9Cz0L7RgtGW0LLQutCwJyB8fCB0ZXh0QXJlYVs1XS52YWx1ZSA9PT0gJ9CT0L7RgtGW0LLQutCwJykgdGhpcy52YXJpYW50PTE7XG4gICAgICAgIGVsc2UgdGhpcy52YXJpYW50PTA7XG4gICAgICAgIHRoaXMub3JkZXJMaXN0PW9yZGVyTGlzdDtcbiAgICB9XG59XG5cbmxldCBzY1JlbmRlciA9IG5ldyBzY3JlZW5DcmVhdGUobnVsbCwgbnVsbCwnJyk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCk9PntcbiAgICBsZXQgY3VyZW50Q2xhc3NOYW1lID0gZXZlbnQudGFyZ2V0LmNsYXNzTmFtZTtcbiAgICBpZiAoY3VyZW50Q2xhc3NOYW1lID09PSAnJyAmJiBldmVudC50YXJnZXQudGFnTmFtZSA9PT0gJ0lNRycpY3VyZW50Q2xhc3NOYW1lPSdJTUcnO1xuICAgIGxldCBsb2M9d2luZG93LmxvY2F0aW9uLmhhc2g7XG4gICAgc3dpdGNoIChjdXJlbnRDbGFzc05hbWUpe1xuICAgIGNhc2UgJ29uZU9wdCc6eyB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjY2F0YWxvZy8nK2V2ZW50LnRhcmdldC5pZDsgYnJlYWs7fVxuICAgIGNhc2UgJ3Nob3BDb3VudGVyJzp7IGlmIChsb2MgIT09ICcjYmFza2V0UGFnZScgJiYgZXZlbnQudGFyZ2V0LmlkICE9PSAnJykgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnI2Jhc2tldFBhZ2UnOyAgYnJlYWs7fVxuICAgIGNhc2UgJ3Nob3BCYXNrZXQnOnsgaWYgKGxvYyAhPT0gJyNiYXNrZXRQYWdlJyAmJiBldmVudC50YXJnZXQuaWQgIT09ICcnKSB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjYmFza2V0UGFnZSc7ICBicmVhazt9XG4gICAgY2FzZSAncHJvZHVjdE5hbWUnOnsgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnI29uZVByb2R1Y3RQYWdlLycgKyBldmVudC50YXJnZXQuaWQ7IGJyZWFrO31cbiAgICBjYXNlICdhY3Rpb24nOnsgd2luZG93LmxvY2F0aW9uLmhhc2ggPScjb25lQWN0aW9uLycgKyBldmVudC50YXJnZXQuaWQ7IGJyZWFrO31cbiAgICBjYXNlICdJTUcnOnsgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0nI29uZVByb2R1Y3RQYWdlLycgKyBldmVudC50YXJnZXQuaWQ7IGJyZWFrO31cbiAgICBjYXNlICdvcmRlcic6e2FkZFRvT3JkZXIoZXZlbnQudGFyZ2V0KTticmVhazt9XG4gICAgY2FzZSAndW5vcmRlcic6e2RlbGV0ZUZyb21PcmRlcihldmVudC50YXJnZXQpO2JyZWFrO31cbiAgICBjYXNlICdvcmRlckJ0bic6e2lmKG9yZGVyLmxlbmd0aD4wKXdpbmRvdy5sb2NhdGlvbi5oYXNoID0nI2NyZWF0ZU9yZGVyJzticmVhazt9XG4gICAgY2FzZSAncHJvZHVjdEltZyc6e21vdmVJbWcoZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQpO2JyZWFrO31cbiAgICBjYXNlICdQdXRPcmRlcic6e3B1c2hPcmRlcigpO2JyZWFrO31cbiAgICBkZWZhdWx0OiB7YnJlYWs7fVxuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiByZXRvdWNoVGV4dCh0YXJnZXQsIHRleHQsIHRleHRBcmVhKSB7XG4gICAgbGV0IGk9cGFyc2VJbnQodGFyZ2V0LmlkKTtcbiAgICBpZih0ZXh0QXJlYVtpXS52YWx1ZSA9PT0gJycgfHwgdGV4dEFyZWFbaV0udmFsdWUgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgIHRleHRBcmVhW2ldLnZhbHVlPXRleHQ7fVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uKHRleHRBcmVhKXtcbiAgICBsZXQgaXNWYWxpZD10cnVlO1xuICAgIGxldCBwaG9uZU51bWJlcj0vXlxcKzM4MFxcZHs5fSQvO1xuICAgIGxldCBtYWlsPS9eW15ALl17MSx9QFteQC5dezEsfS5bXkAuXXsxLH0kLztcbiAgICBsZXQgYWRkcmVzcz0vXtCa0LjRl9CyLCDQstGD0LsuXFxXezEsfS87XG4gICAgbGV0IG5hbWU9L15cXFd7MSx9JC87XG4gICAgbGV0IHZhcmlhbnQ9WyfQs9C+0YLRltCy0LrQsCcsJ9CT0L7RgtGW0LLQutCwJywn0JrQsNGA0YLQsCcsJ9C60LDRgNGC0LAnXTtcbiAgICBpZiAoIXBob25lTnVtYmVyLnRlc3QodGV4dEFyZWFbMF0udmFsdWUpKVxuICAgIHtcbiAgICAgICAgYWxlcnQoJ9Cd0LXQutC+0YDQtdC60YLQvdC+INCy0LLQtdC00LXQvdC40Lkg0L3QvtC80LXRgCDRgtC10LvQtdGE0L7QvdGDJyk7XG4gICAgICAgIGlzVmFsaWQgPSBmYWxzZTt0ZXh0QXJlYVswXS5zdHlsZS5jb2xvciA9ICdyZWQnO1xuICAgIH1cbiAgICBpZiAoIW1haWwudGVzdCh0ZXh0QXJlYVsxXS52YWx1ZSkgJiYgdGV4dEFyZWFbMV0udmFsdWUgIT09ICcnKVxuICAgIHtcbiAgICAgICAgYWxlcnQoJ9Cd0LXQutC+0YDQtdC60YLQvdC+INCy0LLQtdC00LXQvdC40LkgZW1haWwnKTtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB0ZXh0QXJlYVsxXS5zdHlsZS5jb2xvciA9ICdyZWQnO1xuICAgIH1cbiAgICBpZiAoIW5hbWUudGVzdCh0ZXh0QXJlYVsyXS52YWx1ZSkgJiYgdGV4dEFyZWFbMl0udmFsdWUgIT09ICcnKVxuICAgIHtcbiAgICAgICAgYWxlcnQoJ9Cd0LXQutC+0YDQtdC60YLQvdC+INCy0LLQtdC00LXQvdC1INGW0LxcXCfRjycpO1xuICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHRleHRBcmVhWzJdLnN0eWxlLmNvbG9yID0gJ3JlZCc7XG4gICAgfVxuICAgIGlmICghYWRkcmVzcy50ZXN0KHRleHRBcmVhWzNdLnZhbHVlKSl7XG4gICAgICAgIGFsZXJ0KCfQndC10LrQvtGA0LXQutGC0L3QviDQstCy0LXQtNC10L3QsCDQsNC00YDQtdGB0LAnKTtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB0ZXh0QXJlYVszXS5zdHlsZS5jb2xvciA9ICdyZWQnO1xuICAgIH1cbiAgICBpZiAoIXZhcmlhbnQuaW5jbHVkZXModGV4dEFyZWFbNV0udmFsdWUpKVxuICAgIHtcbiAgICAgICAgYWxlcnQoJ9Ce0L/Qu9Cw0YLQsCDQvdC10LzQvtC20LvQuNCy0LAnKTtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB0ZXh0QXJlYVs1XS5zdHlsZS5jb2xvciA9ICdyZWQnO1xuICAgIH1cbiAgICBmb3IobGV0IHE9MDtxPHRleHRBcmVhLmxlbmd0aDtxKyspIHtcbiAgICAgICAgdGV4dEFyZWFbcV0ub25pbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRleHRBcmVhW3FdLnN0eWxlLmNvbG9yID0gJyMwMDAwMDAnO1xuICAgICAgICB9O1xuICAgICAgICBpZih0ZXh0QXJlYVtxXS52YWx1ZSA9PT0gJycpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRleHRBcmVhW3FdLnN0eWxlLmNvbG9yID0gJyMwMDAwMDAnO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpc1ZhbGlkO1xufVxuXG5hc3luYyBmdW5jdGlvbiBwdXNoT3JkZXIoKSB7XG4gICAgbGV0IHRleHRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZnVuY3Rpb25JbnB1dCcpO1xuICAgIGxldCBpc1ZhbGlkID0gdmFsaWRhdGlvbih0ZXh0QXJlYSk7XG4gICAgbGV0IGJhbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdEJhbmVyJyk7XG4gICAgaWYgKGlzVmFsaWQpe1xuICAgICAgICBsZXQgb25lT3JkZXIgPSBuZXcgT3JkZXIodGV4dEFyZWEsIG9yZGVyKTtcbiAgICAgICAgbGV0IHlvdXJPcmRlciA9IGF3YWl0IHBvc3RPcmRlcihvbmVPcmRlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKHlvdXJPcmRlcik7XG4gICAgICAgIGJhbmVyLmlubmVySFRNTCA9ICfQn9GA0LjQudC90Y/RgtC+ISc7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnb3JkZXJzJywgSlNPTi5zdHJpbmdpZnkoW10pKTtcbiAgICAgICAgb3JkZXI9W107XG4gICAgICAgIHJlZnJlc2hDb3VudGVyKCk7XG4gICAgfVxuICAgIGVsc2V7YmFuZXIuaW5uZXJIVE1MID0gJ9Cf0L7QvNC40LvQutCwINC30LDQvNC+0LLQu9C10L3QvdGPJzt9XG4gICAgYmFuZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgYmFuZXIuc3R5bGUudG9wID0gJ2NhbGMoNTB2aCAtIDEwdmggKyAnKyB3aW5kb3cuc2Nyb2xsWSArJ3B4KSc7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShiYW5lcnN0ZXApO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gZGVsMygpeyBiYW5lci5zdHlsZS5kaXNwbGF5PSdub25lJzsgYmFuZXIuaW5uZXJIVE1MPSfQotC+0LLQsNGAINC00L7QtNCw0L3QviDQsiDQutC+0YDQt9C40L3Rgyc7fSwgMTAwMCk7XG59XG5cbndpbmRvdy5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGxldCBjdXJlbnRDbGFzc05hbWUgPSBldmVudC50YXJnZXQuY2xhc3NOYW1lO1xuICAgIGxldCB0ZXh0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Z1bmN0aW9uSW5wdXQnKTtcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggIT09ICcjY3JlYXRlT3JkZXInIHx8IGN1cmVudENsYXNzTmFtZSAhPT0gJ2Z1bmN0aW9uTmFtZScpe3JldHVybjt9XG4gICAgbGV0IHZhbHVlID0gZXZlbnQudGFyZ2V0LmlubmVySFRNTDtcbiAgICBzd2l0Y2ggKHZhbHVlKXtcbiAgICBjYXNlICdI0L7QvNC10YAg0KLQtdC70LXRhNC+0L3RgyAqJzp7cmV0b3VjaFRleHQoZXZlbnQudGFyZ2V0LCBvcmRlckNhc2VbMF0sIHRleHRBcmVhKTticmVhazt9XG4gICAgY2FzZSAn0JXQvNC10LnQuyc6e3JldG91Y2hUZXh0KGV2ZW50LnRhcmdldCwgb3JkZXJDYXNlWzFdLCB0ZXh0QXJlYSk7YnJlYWs7fVxuICAgIGNhc2UgJ9Cf0IbQkSc6e3JldG91Y2hUZXh0KGV2ZW50LnRhcmdldCwgb3JkZXJDYXNlWzJdLCB0ZXh0QXJlYSk7YnJlYWs7fVxuICAgIGNhc2UgJ9CQ0LTRgNC10YHQsCAqJzp7cmV0b3VjaFRleHQoZXZlbnQudGFyZ2V0LCBvcmRlckNhc2VbM10sIHRleHRBcmVhKTticmVhazt9XG4gICAgY2FzZSAn0JTQsNGC0LAg0LTQvtGB0YLQsNCy0LrQuCAqJzp7cmV0b3VjaFRleHQoZXZlbnQudGFyZ2V0LCBvcmRlckNhc2VbNF0sIHRleHRBcmVhKTticmVhazt9XG4gICAgY2FzZSAn0JLQsNGA0ZbQsNC90YIg0L7Qv9C70LDRgtC4Jzp7cmV0b3VjaFRleHQoZXZlbnQudGFyZ2V0LCBvcmRlckNhc2VbNV0sIHRleHRBcmVhKTticmVhazt9XG4gICAgZGVmYXVsdDoge2JyZWFrO31cbiAgICB9XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoZXZlbnQpPT57XG4gICAgbGV0IGN1cmVudENsYXNzTmFtZSA9IGV2ZW50LnRhcmdldC5jbGFzc05hbWU7XG4gICAgbGV0IHRleHRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZnVuY3Rpb25JbnB1dCcpO1xuICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCAhPT0gJyNjcmVhdGVPcmRlcicgfHwgY3VyZW50Q2xhc3NOYW1lICE9PSAnZnVuY3Rpb25OYW1lJyl7cmV0dXJuO31cbiAgICBsZXQgaT1wYXJzZUludChldmVudC50YXJnZXQuaWQpO1xuICAgIGlmICgodGV4dEFyZWFbaV0udmFsdWUgPT09IG9yZGVyQ2FzZVtpXSkpe1xuICAgICAgICB0ZXh0QXJlYVtpXS52YWx1ZT0nJztcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gYWRkVG9PcmRlcih0YXJnZXQpe1xuICAgIGxldCBpZCA9IHRhcmdldC5wYXJlbnRFbGVtZW50LmZpcnN0Q2hpbGQuaWQ7XG4gICAgbGV0IGJhbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdEJhbmVyJyk7XG4gICAgZm9yIChsZXQgaT0wOyBpPG9yZGVyLmxlbmd0aDsgaSs9Mil7XG4gICAgICAgIGlmIChvcmRlcltpXSA9PT0gaWQpe1xuICAgICAgICAgICAgb3JkZXJbaSsxXSsrO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbMV0uY2xhc3NOYW1lID09PSAnY291bnRlck9yZGVyZWQnKVxuICAgICAgICAgICAgICAgIHRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbMV0uaW5uZXJIVE1MPW9yZGVyW2krMV07XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yZGVyKSk7XG4gICAgICAgICAgICBiYW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGJhbmVyLnN0eWxlLnRvcCA9ICdjYWxjKDUwdmggLSAxMHZoICsgJyArIHdpbmRvdy5zY3JvbGxZICsgJ3B4KSc7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGJhbmVyc3RlcCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGRlbDIoKXtiYW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO30sIDEwMDApO1xuICAgICAgICAgICAgcmVmcmVzaENvdW50ZXIoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvcmRlci5wdXNoKGlkKTtcbiAgICBvcmRlci5wdXNoKDEpO1xuICAgIGJhbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGJhbmVyLnN0eWxlLnRvcCA9ICdjYWxjKDUwdmggLSAxMHZoICsgJyArIHdpbmRvdy5zY3JvbGxZICsgJ3B4KSc7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShiYW5lcnN0ZXApO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gZGVsMigpe2JhbmVyLnN0eWxlLmRpc3BsYXk9J25vbmUnO30sIDEwMDApO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnb3JkZXJzJywgSlNPTi5zdHJpbmdpZnkoIG9yZGVyKSk7XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoID09PSAnI2Jhc2tldFBhZ2UnKVxuICAgICAgICBiYXNrZXRGdWxsKHNjUmVuZGVyLmNvbnRhaW5lciwgc2NSZW5kZXIuZGIsIG9yZGVyKTtcbiAgICByZWZyZXNoQ291bnRlcigpO1xufVxuXG5mdW5jdGlvbiBkZWxldGVGcm9tT3JkZXIodGFyZ2V0KXtcbiAgICBsZXQgaWQgPSB0YXJnZXQucGFyZW50RWxlbWVudC5maXJzdENoaWxkLmlkO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyBpICs9IDIpe1xuICAgICAgICBpZiAob3JkZXJbaV0gPT09IGlkKXtcbiAgICAgICAgICAgIG9yZGVyW2kgKyAxXS0tO1xuICAgICAgICAgICAgaWYgKG9yZGVyW2kgKyAxXSA8IDEpe1xuICAgICAgICAgICAgICAgIG9yZGVyLnNwbGljZShpICsgMSwgMSk7XG4gICAgICAgICAgICAgICAgb3JkZXIuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQ9dGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgcGFyZW50LmFuaW1hdGUoW1xuICAgICAgICAgICAgICAgICAgICB7b3BhY2l0eTogJzEwMCUnfSxcbiAgICAgICAgICAgICAgICAgICAge29wYWNpdHk6ICcwJSd9XG4gICAgICAgICAgICAgICAgXSx7ZHVyYXRpb246IDEwMDAsaXRlcmF0aW9uczogMX0pO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnb3JkZXJzJywgSlNPTi5zdHJpbmdpZnkoIG9yZGVyKSk7XG4gICAgICAgICAgICAgICAgcmVmcmVzaENvdW50ZXIoKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGRlbCgpe3BhcmVudC5yZW1vdmUoKTt9LCA5ODAsIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1sxXS5pbm5lckhUTUwgPSBvcmRlcltpKzFdO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnb3JkZXJzJywgSlNPTi5zdHJpbmdpZnkoIG9yZGVyKSk7XG4gICAgICAgICAgICAgICAgcmVmcmVzaENvdW50ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVmcmVzaENvdW50ZXIoKXtcbiAgICBsZXQgY291bnRlclByb2R1Y3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvcENvdW50ZXInKTtcbiAgICBsZXQgc2hvcEJhc2tldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Nob3BCYXNrZXQnKTtcbiAgICBpZiAoc2hvcEJhc2tldC5sZW5ndGggPiAxKXtzaG9wQmFza2V0ID0gc2hvcEJhc2tldFsxXS5maXJzdENoaWxkO31cbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgZm9yIChsZXQgcSA9IDA7IHEgPCBvcmRlci5sZW5ndGg7IHEgKz0gMil7XG4gICAgICAgIGNvdW50ZXIgKz0gb3JkZXJbcSsxXTtcbiAgICB9XG4gICAgY291bnRlclByb2R1Y3QuaW5uZXJIVE1MID0gY291bnRlcjtcbn1cblxud2luZG93Lm9ubG9hZCA9IGFzeW5jIGZ1bmN0aW9uICgpe1xuICAgIGxldCBkYjE7XG4gICAgdHJ5e1xuICAgICAgICBkYjEgPSBhd2FpdCBmZXRjaE15RGF0YSgpO31cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoJ9C/0L7QvNC40LvQutCwINGB0LXRgNCy0LXRgNCwOiAnKyBlcnJvciArICcuINCh0L/RgNC+0LHRg9C50YLQtSDQv9GW0LfQvdGW0YjQtScpO1xuICAgIH1cbiAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZS5sZW5ndGggPT09IDApXG4gICAge1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29yZGVycycsICBKU09OLnN0cmluZ2lmeShvcmRlcikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IG9yZGVyVG1wPXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb3JkZXJzJyk7XG4gICAgICAgIG9yZGVyPUpTT04ucGFyc2Uob3JkZXJUbXApO1xuICAgIH1cblxuICAgIGxldCBzY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb250YWluZXInKTtcbiAgICBpZiAoc2NyZWVuLmxlbmd0aCA+IDApIHNjcmVlblswXS5yZW1vdmUoKTtcbiAgICBjb25zdCB1cE1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd1cHBlck1lbnUnKVswXTtcbiAgICBsZXQgY29udGFpbmVyID0gaW5zZXJ0RWxlbWVudEluUGxhY2UoJ2RpdicsICdjb250YWluZXInLCB1cE1lbnUsICdhZnRlcmVuZCcpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbnRhaW5lcicpWzBdLnN0eWxlLmRpc3BsYXk9J25vbmUnO1xuICAgIHNjUmVuZGVyID0gbmV3IHNjcmVlbkNyZWF0ZShjb250YWluZXIsIGRiMSwgd2luZG93LmxvY2F0aW9uLmhhc2guc3BsaXQoJy8nKSk7XG4gICAgbGV0IGNhdE9wdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NhdE9wdCcpWzBdO1xuICAgIGZvcihsZXQgdyA9IDA7dyA8IHNjUmVuZGVyLmRiLmNhdGVnb3J5Lmxlbmd0aDsgdysrKXtcbiAgICAgICAgbGV0IHRleHREaXYgPSBpbnNlcnRFbGVtZW50KCdkaXYnLCAnb25lT3B0JywgY2F0T3B0KTtcbiAgICAgICAgdGV4dERpdi5pbm5lckhUTUwgPSBzY1JlbmRlci5kYi5jYXRlZ29yeVt3XS5uYW1lO1xuICAgICAgICB0ZXh0RGl2LmlkID0gc2NSZW5kZXIuZGIuY2F0ZWdvcnlbd10uaWQ7XG4gICAgfVxuICAgIHJlZnJlc2hDb3VudGVyKCk7XG4gICAgc2NSZW5kZXIucmVuZGVyU2NyZWVuKCk7XG59O1xuXG53aW5kb3cub25oYXNoY2hhbmdlID0gZnVuY3Rpb24gKCl7bG9jYXRpb24ucmVsb2FkKCk7fTsiLCJhc3luYyBmdW5jdGlvbiBmZXRjaE15RGF0YSgpIHtcbiAgICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vbXktanNvbi1zZXJ2ZXIudHlwaWNvZGUuY29tL015a29sYU9ueXNoY2h1ay9MYWI0Q0QvZGInLFxuICAgICAgICB7bWV0aG9kOiAnR0VUJywgIGhlYWRlcnM6IHsnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfX0pXG4gICAgICAgIC50aGVuKHJlc3VsdCA9PiByZXN1bHQuanNvbigpKVxuICAgICAgICAudGhlbihkYXRhID0+IHtyZXR1cm4gZGF0YTt9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBvc3RPcmRlcihPcmRlcikge1xuICAgIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vTXlrb2xhT255c2hjaHVrL0xhYjRDRC9wb3N0cycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KE9yZGVyKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgfSkudGhlbihyZXN1bHQgPT4gcmVzdWx0Lmpzb24oKSlcbiAgICAgICAgLnRoZW4oZGF0YSA9PiB7cmV0dXJuIGRhdGE7fSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgYWxlcnQoJ9Cf0L7QvNC40LvQutCwINCh0LXRgNCy0LXRgNCwICcrIGVycm9yKTtcbiAgICAgICAgfSk7XG59XG5leHBvcnQge2ZldGNoTXlEYXRhLHBvc3RPcmRlcn07Il0sInNvdXJjZVJvb3QiOiIifQ==